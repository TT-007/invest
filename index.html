<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <!-- Open Graph（合规：用于社媒分享预览；请按需修改） -->
  <meta property="og:title" content="请稍候 — 正在跳转" />
  <meta property="og:description" content="我们正在为您准备目标页面，即将自动跳转。" />
  <meta property="og:image" content="https://yourdomain.com/path/to/preview.jpg" />
  <meta property="og:url" content="https://yourdomain.com/redirect.html" />
  <meta property="og:type" content="website" />

  <title>请稍候 — 正在跳转</title>

  <style>
    :root{
      --bg1: 255, 99, 132;
      --bg2: 54, 162, 235;
      --card-bg: 255,255,255;
      --text: 23,23,23;
      --muted: 102,102,102;
      --accent: 17, 110, 234;
      --ring: 15, 111, 255;
      --shadow: 0 20px 50px rgba(0,0,0,.15);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --card-bg: 20,20,23;
        --text: 245,245,247;
        --muted: 170,170,180;
        --accent: 118, 176, 255;
        --ring: 118,176,255;
        --shadow: 0 20px 60px rgba(0,0,0,.45);
      }
    }

    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: rgb(var(--text));
      background: radial-gradient(1200px 800px at 20% 20%, rgba(var(--bg1),.18), transparent 60%),
                  radial-gradient(1200px 800px at 80% 80%, rgba(var(--bg2),.18), transparent 60%),
                  linear-gradient(180deg, rgba(0,0,0,.03), transparent 40%);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
    }
    .grain{position:fixed; inset: -200px; pointer-events:none; opacity:.05; background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.5"/></svg>'); animation: drift 18s linear infinite;}
    @keyframes drift{to{transform:translate3d(-50px,-50px,0)}}

    .card{
      position:relative; width:min(92vw, 760px);
      background: rgba(var(--card-bg), .75);
      backdrop-filter: blur(14px) saturate(1.2);
      border: 1px solid rgba(255,255,255,.25);
      border-radius: 20px;
      padding: 28px 28px 22px;
      box-shadow: var(--shadow);
    }

    .hdr{display:flex; align-items:center; gap:14px; margin-bottom:6px}
    .logo{width:40px; height:40px; border-radius:12px; background: linear-gradient(135deg, rgba(var(--bg1),.9), rgba(var(--bg2),.9)); display:grid; place-items:center; color:#fff; font-weight:700; letter-spacing:.4px}
    .title{font-size: clamp(18px, 2.2vw, 22px); font-weight: 700;}
    .desc{color: rgb(var(--muted)); font-size: 14px; margin: 6px 0 18px}

    .progress-wrap{display:flex; align-items:center; gap:16px}
    .ring{
      width: 68px; height: 68px; position:relative
    }
    .ring svg{transform:rotate(-90deg)}
    .ring .num{position:absolute; inset:0; display:grid; place-items:center; font-weight:700; font-variant-numeric: tabular-nums;}
    .bar{flex:1}

    .meter{height: 10px; width:100%; background: rgba(0,0,0,.08); border-radius: 999px; overflow:hidden; position:relative}
    .meter > span{display:block; height:100%; width:0%; background: linear-gradient(90deg, rgba(var(--ring),1), rgba(var(--bg2),.9)); border-radius: 999px; transition: width .15s ease}

    .actions{display:flex; flex-wrap:wrap; gap:10px; margin-top:18px}
    .btn{
      appearance:none; border:0; padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer;
      background:#fff; color:#111; box-shadow: 0 2px 6px rgba(0,0,0,.06);
    }
    .btn.primary{background: linear-gradient(135deg, rgba(var(--bg2),1), rgba(var(--bg1),.9)); color:#fff}
    .btn.ghost{background: transparent; border:1px solid rgba(0,0,0,.12); color: rgb(var(--text))}
    .btn:focus-visible{outline:3px solid rgba(var(--ring), .65); outline-offset:2px}

    .tips{display:grid; grid-template-columns: 1fr; gap:8px; margin-top:16px; color: rgb(var(--muted)); font-size:13px}
    .tips code{background: rgba(127,127,127,.15); padding:2px 6px; border-radius:6px}

    .footer{display:flex; align-items:center; justify-content:space-between; margin-top:16px; font-size:12px; color: rgb(var(--muted))}

    @media (prefers-reduced-motion: reduce){
      .grain{animation:none}
    }
  </style>

  <!-- 无脚本降级：3秒后自动前往（可按需修改） -->
  <noscript>
    <meta http-equiv="refresh" content="3;url=https://https://wa.me/33688054788/target">
  </noscript>
</head>
<body>
  <div class="grain"></div>
  <main class="card" role="status" aria-live="polite">
    <header class="hdr">
      <div class="logo" aria-hidden="true">GO</div>
      <div>
        <div class="title">请稍候 — 正在为您准备目标页面</div>
        <p class="desc">我们正在进行初始化与安全检查，完成后会自动为您跳转。</p>
      </div>
    </header>

    <section class="progress-wrap">
      <div class="ring" aria-hidden="true">
        <svg width="68" height="68" viewBox="0 0 120 120">
          <circle cx="60" cy="60" r="52" stroke="rgba(0,0,0,.08)" stroke-width="12" fill="none" />
          <circle id="arc" cx="60" cy="60" r="52" stroke="rgb(var(--ring))" stroke-linecap="round" stroke-width="12" fill="none" stroke-dasharray="326" stroke-dashoffset="326" />
        </svg>
        <div class="num" id="pct">0%</div>
      </div>
      <div class="bar" aria-label="进度">
        <div class="meter" aria-hidden="true"><span id="bar"></span></div>
        <div class="tips">
          <div>预计 <strong id="etaText">2.2</strong> 秒后跳转至 <code id="host">example.com</code></div>
          <div id="wsTip" style="display:none">正在建立安全连接… 如果失败将自动回退为普通跳转</div>
        </div>
      </div>
    </section>

    <div class="actions">
      <button class="btn primary" id="goNow">立即前往</button>
      <button class="btn" id="copy">复制链接</button>
      <button class="btn ghost" id="reload">刷新页面</button>
    </div>

    <div class="footer">
      <span>如未自动跳转，请点击「立即前往」。</span>
      <span id="safe">安全校验：进行中…</span>
    </div>
  </main>

  <script>
    // ====== 配置区：按需修改 ======
    const TARGET_URL = "https://wa.me/33688054788";   // 目标地址
    const WAIT_MS    = 2200;                            // 等待时间（毫秒）
    const USE_WS     = false;                           // 是否先尝试 WebSocket 建连
    const WS_URL     = "wss://example.com/socket";     // WebSocket 地址（当 USE_WS=true 时有效）

    // ====== 程序逻辑（无需改动） ======
    const pctEl = document.getElementById('pct');
    const barEl = document.getElementById('bar');
    const arcEl = document.getElementById('arc');
    const hostEl = document.getElementById('host');
    const etaEl = document.getElementById('etaText');
    const wsTip = document.getElementById('wsTip');
    const goNow = document.getElementById('goNow');
    const copyBtn = document.getElementById('copy');
    const reloadBtn = document.getElementById('reload');
    const safeEl = document.getElementById('safe');

    try{ hostEl.textContent = new URL(TARGET_URL).host }catch{ hostEl.textContent = TARGET_URL }
    etaEl.textContent = (WAIT_MS/1000).toFixed(1);

    let start = performance.now();
    const perimeter = 2 * Math.PI * 52; // 与 stroke-dasharray 对应
    arcEl.setAttribute('stroke-dasharray', perimeter);

    function ease(t){ // 0-1 -> easeOutCubic
      return 1 - Math.pow(1 - t, 3);
    }

    function update(){
      const now = performance.now();
      const p = Math.min(1, (now - start) / WAIT_MS);
      const e = ease(p);
      const pct = Math.round(e * 100);
      pctEl.textContent = pct + '%';
      barEl.style.width = (e * 100) + '%';
      const dashoffset = perimeter * (1 - e);
      arcEl.setAttribute('stroke-dashoffset', dashoffset);
      if(p < 1){ requestAnimationFrame(update) }
    }
    requestAnimationFrame(update);

    function navigate(){ window.location.href = TARGET_URL }

    function tryWSAndNavigate(){
      if(!USE_WS){ navigate(); return }
      wsTip.style.display = '';
      let ok = false;
      try{
        const ws = new WebSocket(WS_URL);
        ws.addEventListener('open', ()=>{ ok = true; safeEl.textContent = '安全校验：已建立连接'; navigate(); });
        ws.addEventListener('error', ()=>{ if(!ok){ safeEl.textContent = '安全校验：回退模式'; setTimeout(navigate, 400) } });
      }catch(e){ setTimeout(navigate, 150) }
    }

    const timer = setTimeout(tryWSAndNavigate, WAIT_MS + 120);

    goNow.addEventListener('click', ()=>{ clearTimeout(timer); navigate() });
    copyBtn.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(TARGET_URL); copyBtn.textContent = '已复制'; setTimeout(()=>copyBtn.textContent='复制链接', 1200) }catch{ alert('复制失败：' + TARGET_URL) }
    });
    reloadBtn.addEventListener('click', ()=> location.reload());
  </script>
</body>
</html>
